<!DOCTYPE HTML>
<script src=/burst/include/common.js></script>
<title>陀螺商品 ￭ Beyblade Burst merchandise</title>
<link rel=stylesheet href=products.css>
<link rel=stylesheet href=/include/component.css>
<style></style>

<nav>
    <script>nav(['/', '/parts/'])</script>
    <span class=free-search title=自由檢索>Free search</span>
    <div class=prod-search>
        <label for=free></label>
        <input id=free placeholder=巨神/valkyrie>
    </div>
    <data class=prod-result title=結果>Results</data>
    <button class=prod-reset> 重設 Reset</button>
</nav>
<input type=radio name=system id=DB data-part='[["Core","layer7c"],["Blade","layer7b"],["Armor","layer7a"]]' checked>
<input type=radio name=system id=SP data-part='[["Chip","layer6c"],["Ring","layer6r"],["Chassis","layer6s"]]'>
<input type=radio name=system id=GT data-part='[["Chip","layer5c"],["Base","layer5b"],["Weight","layer5w"]]'>
<input type=checkbox id=eng>
<input type=checkbox id=jap>
<main>
    <db-status></db-status>
    <form>
        <svg style="display:none">
            <polygon id=link points="0,-100 -86.603,-50 -86.603,50 86.603,50 86.603,-50" stroke-width=4 />
        </svg>
        <div>
            <a href=https://beyblade.takaratomy.co.jp/burst/products.html rel=noreferrer>
                <svg viewBox="-86.603 -100 173.205 150"><use href=#link /></svg>
                <span data-icon=>官方<br>商品頁面</span>
            </a>
            <a href=# onclick=nostalgia()>
                <svg viewBox="-86.603 -100 173.205 150"><use href=#link transform="rotate(180 0 -25)" /></svg>
                <span data-icon=>手氣<br>回憶過去</span>
            </a>
        </div>
        <details>
            <summary>
                <span>精準檢索Precise search</span>
                <button type=button></button>
            </summary>
            <fieldset>
                <p class=layer>
                    <label for=DB><img src=/img/system-layer7.png alt=DB></label>
                    <label for=SP><img src=/img/system-layer6.png alt=SP></label>
                    <label for=GT><img src=/img/system-layer5.png alt=GT></label>
                    <label for=motif>Core</label>
                    <input name=layer7c id=motif placeholder=g/V/s><br>
                    <label for=main>Blade</label>
                    <input name=layer7b id=main placeholder=g/V/s><br>
                    <label for=key>Armor</label>
                    <input name=layer7a id=key placeholder=6/1s/斬>
                </p>
                <p class=layer>
                    <label for=layer>Layer</label>
                    <input name=layer id=layer placeholder=L2/GV/br>
                </p>
                <p class=disk>
                    <label for=disk>Disk</label>
                    <input name=disk id=disk placeholder=G/4/2v><br>
                    <label for=frame>Frame</label>
                    <input name=frame id=frame placeholder=g/V/s>
                </p>
                <p class=driver>
                    <label for=driver>Driver</label>
                    <input name=driver id=driver placeholder=at/m/RB>
                </p>
            </fieldset>
        </details>
        <div>
            <a href=launchers.html>
                <svg viewBox="-86.603 -100 173.205 150"><use href=#link /></svg>
                <span data-icon=>各款<br>發射器</span>
            </a>
            <a href=#BBG>
                <svg viewBox="-86.603 -100 173.205 150"><use href=#link transform="rotate(180 0 -25)"/></svg>
                <span data-icon=>更多<br>限定商品</span>
            </a>
        </div>
    </form>

    <details id=filter>
        <summary> 分類 Classification<i></i></summary>
        <div>
            <label for=S class=S title=附發射器的單陀螺>Starter</label>
            <label for=B class=B title=單陀螺>Booster</label>
            <label for=St class=St title=至少包含兩陀螺或單陀螺加對戰盤>Set</label>
            <label for=RL class=RL title='單 Layer 抽包或扭蛋（BG-）'>Random Layer</label>
            <label for=RB class=RB title=單陀螺抽包>Random Booster</label>
            <label for=L class=L title='「wbba 限定」'>BBG-</label>
        </div>
        <span> 異色版 Recolors</span>
        <div>
            <label for=S-H class='S H'>Starter</label>
            <label for=B-H class='B H'>Booster</label>
            <label for=St-H class='St H'>Set</label>
            <label for=RL-H class='RL H'>Random Layer</label>
            <label for=RB-H class='RB H'>Random Booster</label>
        </div>
        <span> 系統 System<button>全部 All</button></span>
        <div class=system>
            <label for=layer7><img src=/img/system-layer7.png alt=DB></label>
            <label for=layer6><img src=/img/system-layer6.png alt=SP></label>
            <label for=layer5><img src=/img/system-layer5.png alt=GT></label>
            <label for=layer4><img src=/img/system-layer4.png alt=CZ></label>
            <label for=layer3><img src=/img/system-layer3.png alt=god></label>
            <label for=layer2><img src=/img/system-layer2.png alt=dual></label>
            <label for=layer1><img src=/img/system-layer1.png alt=single></label>
            <label for=MFB><img src=/img/system-MFB.png alt=MFB></label>
            <label for=BSB><img src=/img/system-BSB.png alt=BSB></label>
        </div>
    </details>

    <table id=regular class=new>
        <caption class=loading>
            <span> 2021.04～</span>
            <button>顯示全部 Show all</button>
            <label for=eng>A</label>
            <label for=jap>ア</label>
        </caption>
        <thead>
            <tr class=comp>
                <th rowspan=2>No</th>
                <th colspan=3 class=layer>Layer / Base /<br>Ring / Blade</th>
                <th colspan=3 class=layer>Chip / Core</th>
                <th class=layer></th>
                <th colspan=3 class=disk>Disk<br>(+Frame)</th>
                <th colspan=3 class=driver>Driver</th>
            </tr>
            <tr class=note>
                <th colspan=7>
                    <span><img src=chips.svg#MGC alt=MGC>：使用 Metal God Chip / Chip Core
                    <br><img src=chips.svg#LC alt=LC>：附有 Level Chip</span>
                </th>
                <th colspan=3>「_」：不隨附<br>但可裝 Frame</th>
                <th colspan=3><ruby>「′」<rt>dash</rt></ruby>：含強彈簧</th>
            </tr>
        </thead>
        <tbody></tbody>
        <tfoot><tr><td><td><td><td>.<td><td><td><td><td><td><td><td><td><td></tfoot>
    </table>
    <table id=BBG>
        <caption>BBG 商品（比賽大會、部分店舖限定）</caption>
        <tbody></tbody>
    </table>
    <ol class=boards></ol>

    <input type=checkbox id=popup>
    <label for=popup class=catalog></label>
</main>

<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js></script>
<script src=table.js></script>
<script src=maps.js></script>
<script src=row.js></script>
<script src=/parts/catalog.js></script>

<script>
Table.events = () => {
    Q('#jap').onchange = ev => {
        Q('#eng').checked = false;
        Q('#eng').disabled = ev.target.checked;
        Q('tbody tr', tr => Row.fill([null, ev.target.checked ? 'jap' : 'chi'], tr));
        Table.flush();
    };
    Q('#eng').onchange = ev => Table.colspan(ev.target.checked ? 'eng' : 'cjk');
    Q('.prod-reset').onclick = Table.reset;
    Q('table button').onclick = Table.entire;
    Q('a[href="#BBG"]').onclick = BBG;
    window.onresize = () => Table.flush();
}
Find.events = () => {
    Q('input[name=system]', radio => radio.onchange = () =>
        JSON.parse(radio.getAttribute('data-part')).forEach((part, i) => {
            let input = Q(`.layer:first-child input:nth-of-type(${i + 1})`);
            [input.previousElementSibling.innerText, input.name] = part;
        })
    );
    Q('input:not([type])', input => input.onkeypress = ({code}) => code == 'Enter' ? Find() : '');
    Q('form button').onclick = () => Find();
}
Filter.events = () => {
    Filter.systems.forEach((input, _, all) => input.addEventListener('change', () => all.forEach(i => i.checked = i == input)));
    Q('#filter button').onclick = () => (Filter.systems.forEach(input => input.checked = true), Filter.filter());
    Filter.inputs.forEach(input => input.onchange = Filter.filter);
    Q('#filter label[title]', label => label.onmouseover = () => Q('#filter summary i').innerText = `｛${label.innerText}｝：${label.title}`);
}
Filter();
Table.events(), Filter.events(), Find.events();

const nostalgia = () => {
    let product = Q('tbody tr:not(.H):not([data-abbr*="./."]):not([data-no=B-124])');
    product = product[Math.floor(Math.random() * product.length)];

    let lang = ['eng', 'chi', 'jap'][Math.floor(Math.random() * 3)];
    let tag = {eng: 'Beyblade', chi: '陀螺', jap: 'ベイブレード'}[lang];

    let name = [product.Q('td[data-part*=layer]')].flat().map(td => {
        let [sym, comp] = td.getAttribute('data-part').split('.');
        return names[comp][sym.replace(/\+.+$/, '')][lang];
    }).filter(n => n);
    let i = Math.round(Math.random());
    name = name.some(n => n.includes('￨')) ? name.map(n => n.split('￨')[i] ?? n).join('') : name.join(lang == 'eng' ? ' ' : '');

    location.href = `https://youtube.com/results?search_query=${product.no} ${name} ${tag}`;
    return false;
}
const unicode = () => 'pyftsubset C:/users/20220129/downloads/SemiBold.otf --passthrough-tables --output-file=C:/users/20220129/Downloads/Mincho-chi.ttf --unicodes=' + [...new Set('戰鬥陀螺爆烈世代爆旋陀螺擊爆戰魂非官方資訊站商品部件景品圖片教學研究連結最新已關閉双' + Object.values(names).map(parts => Object.values(parts).map(({chi}) => chi?.replace(/￨.+|[ 0-9A-Ƶ]/g, ''))).flat(9).join(''))].map(char => 'u+' + char.charCodeAt().toString(16)).join();
</script>

<link rel=stylesheet href=/parts/catalog.css>
<link rel=stylesheet href=/parts/typography.css>
